const e=function(){let e=void 0;const t=require("path"),n=require("lzutf8"),r=function(e){try{return require("chokidar")}catch(e){return}}();let c=!1;function i(e){if(e){if("object"==typeof e||Array.isArray(e))try{e=JSON.stringify(e)}catch(e){return null}try{e=n.compress(e,{outputEncoding:"Base64"})}catch(e){return null}try{e=n.compress(e,{outputEncoding:"StorageBinaryString"})}catch(e){return null}try{e=n.compress(e,{outputEncoding:"Buffer"})}catch(e){return null}return e}}function o(e){if(e){if("object"==typeof e)try{e=n.decompress(e,{inputEncoding:"Buffer"})}catch(e){return null}try{e=n.decompress(e,{inputEncoding:"StorageBinaryString"})}catch(e){return null}try{e=n.decompress(e,{inputEncoding:"Base64"})}catch(e){return null}try{e=JSON.parse(e)}catch(e){}return e}}function u(e){return"number"==typeof e?e:Number(e.replace(/[^0-9.]/g,"").split(".",2).join("."))}function a(e){return"number"==typeof e?Number(e):e&&"string"==typeof e&&""!==e.trim()?e.endsWith("h")?36e5*u(e):e.endsWith("m")?6e4*u(e):e.endsWith("s")?1e3*u(e):e.endsWith("D")?864e5*u(e):e.endsWith("M")?2628e6*u(e):e.endsWith("Y")?31536e6*u(e):e.endsWith("DE")?31536e7*u(e):e.endsWith("C")||this.endsWith("CE")?31536e8*u(e):e.endsWith("ms")?u(e):e.endsWith("us")||this.endsWith("mic")?.001*u(e):e.endsWith("ns")?1e-6*u(e):u(e):NaN}return e={get:function(e,t,n,r){let c=e.get(r);if(c&&(new Date).getTime()<=c.cache.expire)return o(c.file);c&&e.delete(r)},set:function(e,n,r,o,u,s){if((c||"production"===process.env.NODE_ENV)&&!e.has(o)){if(!(u=i(u)))return;let n={};s&&(s.expire||s.exp)&&(n.expire=(new Date).getTime()+a(s.expire||s.exp)),s&&s.listen&&(Array.isArray(s.listen)||(s.listen=[s.listen]),s.listen=s.listen.map(e=>t.resolve(e).toString().replace(/\\/g,"/")),s.listen=i(s.listen),n.listen=s.listen),e.set(o,{file:u,cache:n})}},delete:function(e,t,n,r){e.has(r)&&e.delete(r)},clear:function(e,t,n){e.clear()},watch:function(e,n,c,i){if(!r)return console.warn("obj-memory-cache Watch requires optional dependency: chokidar. run: npm install chokidar"),!1;function u(n){!function(e,n,r,c){c=t.resolve(c).toString().replace(/\\/g,"/"),e.forEach((t,n)=>{if(t.cache.listen){let r=o(t.cache.listen);(r.includes(c)||r.find(e=>c.startsWith(e)))&&e.delete(n)}})}(e,0,0,n)}r.watch(i,{ignoreInitial:!0}).on("change",u).on("add",u).on("unlink",u)},checkInterval:function(e,t,n){setInterval((function(){e.forEach((t,n)=>{t.cache.expire&&(new Date).getTime()>t.cache.expire&&e.delete(n)})}),a("10m"))},cacheDevelopment:function(e=!0){c=e}},e}(),t=n();function n(t={}){const n=new Map,r={memoryUsage:0},c=t;return Object.freeze(c),c.watch&&e.watch(n,r,c,c.watch),e.checkInterval(n,r,c),{get:function(t){return e.get(n,r,c,t)},set:function(t,i,o){return e.set(n,r,c,t,i,o)},delete:function(t){return e.delete(n,r,c,t)},clear:function(){return e.clear(n,r,c)},watch:function(t){return e.watch(n,r,c,t)}}}module.exports=(()=>{let r=function(e={}){e.watch&&e.watch&&t.watch(e.watch)};return r.newCache=n,r.get=t.get,r.set=t.set,r.delete=t.delete,r.clear=t.clear,r.watch=t.watch,r.cacheDevelopment=e.cacheDevelopment,r})();